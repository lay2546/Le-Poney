<!DOCTYPE html>
  <html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Le Poney - р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="Cart.css" />
    <script type="module" src="firebase.js"></script>
    <script type="module" src="firebase-auth-modal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  </head>
  <body class="bg-gray-100">
    <header id="top-bar" class="top-bar">
      <h1 class="top-bar-title logo-text">Le Poney</h1>
      <div class="top-bar-buttons">
        <button id="menu-btn" class="menu-button">тШ░</button>
      </div>
    </header>

    <div id="overlay" class="overlay hidden"></div>

    <aside id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <button id="close-btn" class="close-button">&times;</button>
      </div>
      <nav class="sidebar-nav">
        <a href="Home.html" class="nav-link">ЁЯПб Home</a>
        <div class="dropdown">
          <button class="dropdown-btn">ЁЯЫНя╕П Product <span class="arrow">&#9662;</span></button>
          <div class="dropdown-content">
            <a href="Product.html" class="dropdown-link">ЁЯН░ Bakery & Dessert</a>
            <a href="Product2.html" class="dropdown-link">ЁЯед SMOOTHIE & OTHERS</a>
          </div>
        </div>
        <a href="Cart.html" id="cart-menu" class="nav-link">ЁЯЫТ Cart <span id="cart-count">(0)</span></a>
        <a href="OrderHistory.html" class="nav-link hidden" id="order-history-link">ЁЯУЛ р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н</a>
        <a href="Delivery.html" class="nav-link">ЁЯЪЪ Delivery</a>
        <a href="Event.html" class="nav-link">ЁЯУЕ Event</a>
        <a id="login-btn" class="nav-link cursor-pointer">ЁЯФС Login</a>
        <a id="logout-btn" class="nav-link cursor-pointer hidden">ЁЯЪк Logout</a>
      </nav>
    </aside>

    <!-- ЁЯФР Modal р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ -->
    <!-- ЁЯМЯ Modal Popup р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щ -->
      <div id="login-modal" class="modal hidden">
          <div class="modal-content">
              <button id="close-login-modal" class="close-modal">&times;</button>
              <h2 class="modal-title text-pink-600">ЁЯФС р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</h2>

              <!-- ЁЯз╛ р╕Яр╕нр╕гр╣Мр╕бр╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щ -->
              <label for="login-email" class="input-label">р╕нр╕╡р╣Ар╕бр╕е</label>
              <input type="email" id="login-email" class="modal-input" placeholder="example@email.com" />

              <label for="login-password" class="input-label">р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</label>
              <input type="password" id="login-password" class="modal-input" placeholder="р╕Бр╕гр╕нр╕Бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ" />

              <button id="submit-login" class="modal-button">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</button>

              <div class="my-4 text-center text-sm text-gray-400">р╕лр╕гр╕╖р╕н</div>

              <!-- ЁЯФР р╕Ыр╕╕р╣Ир╕бр╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щр╕Фр╣Йр╕зр╕в Google -->
              <button id="google-login-btn" class="modal-button bg-white border border-gray-300 text-gray-700 flex items-center justify-center gap-2">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5" alt="Google" />
                р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Фр╣Йр╕зр╕в Google
              </button>

              <p class="text-center mt-2 text-sm text-blue-600 cursor-pointer" id="reset-password-link">
                ЁЯФБ р╕ер╕╖р╕бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Гр╕Кр╣Ир╣Др╕лр╕б? р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Чр╕╡р╣Ир╕Щр╕╡р╣И
              </p>

              <p class="text-center mt-4 text-sm text-gray-600">
                  р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Ър╕▒р╕Нр╕Кр╕╡?
                  <span id="openRegister" class="text-pink-600 modal-link">р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</span>
              </p>
          </div>
      </div>

      <!-- ЁЯУЭ Modal р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б -->
      <div id="register-modal" class="modal hidden">
          <div class="modal-content">
              <button id="close-register-modal" class="close-modal">&times;</button>
              <h2 class="modal-title text-green-600">ЁЯУЭ р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</h2>

              <!-- ЁЯУе р╕Яр╕нр╕гр╣Мр╕бр╕ер╕Зр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ -->
              <label for="register-firstname" class="input-label">р╕Кр╕╖р╣Ир╕н</label>
              <input type="text" id="register-firstname" class="modal-input" placeholder="р╕Кр╕╖р╣Ир╕нр╕Ир╕гр╕┤р╕З" />

              <label for="register-lastname" class="input-label">р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е</label>
              <input type="text" id="register-lastname" class="modal-input" placeholder="р╕Щр╕▓р╕бр╕кр╕Бр╕╕р╕е" />

              <label for="register-username" class="input-label">р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й</label>
              <input type="text" id="register-username" class="modal-input" placeholder="р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (р╣Др╕бр╣Ир╕Лр╣Йр╕│)" />

              <label for="register-phone" class="input-label">р╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М</label>
              <input type="tel" id="register-phone" class="modal-input" placeholder="0812345678" />

              <label for="register-email" class="input-label">р╕нр╕╡р╣Ар╕бр╕е</label>
              <input type="email" id="register-email" class="modal-input" placeholder="example@email.com" />

              <label for="register-password" class="input-label">р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</label>
              <input type="password" id="register-password" class="modal-input" placeholder="р╕Хр╕▒р╣Йр╕Зр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ" />

              <button id="submit-register" class="modal-button green">р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</button>

              <p class="text-center mt-4 text-sm text-gray-600">
                  р╕бр╕╡р╕Ър╕▒р╕Нр╕Кр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з?
                  <span id="backToLogin" class="text-green-600 modal-link">р╕Бр╕ер╕▒р╕Ър╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</span>
              </p>
          </div>
      </div>

    <!-- ЁЯЫТ р╕кр╣Ир╕зр╕Щр╕Вр╕нр╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ -->
    <main class="cart-container min-h-screen flex justify-center items-center px-4">
      <div class="w-full max-w-6xl">
        <h2 class="text-2xl font-bold text-center mb-6">р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕Щр╕Хр╕░р╕Бр╕гр╣Йр╕▓</h2>
        <div class="flex flex-col lg:flex-row gap-6">
          <ul id="cart-items" class="cart-list flex-1"></ul>

          <div class="cart-summary w-full lg:max-w-md bg-white p-4 rounded-lg shadow-md space-y-4">
            <p class="total-items text-lg font-medium">ЁЯУж р╕Ир╕│р╕Щр╕зр╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф: <span id="total-items">0</span> р╕Кр╕┤р╣Йр╕Щ</p>
            <div class="text-right text-sm mt-4">
              <p>ЁЯТ░ р╕вр╕нр╕Фр╕гр╕зр╕бр╕Бр╣Ир╕нр╕Щр╕кр╣Ир╕зр╕Щр╕ер╕Ф: р╕┐<span id="subtotal-price">0.00</span></p>
              <p>ЁЯТ╡ р╕кр╣Ир╕зр╕Щр╕ер╕Ф: р╕┐<span id="discount-amount">0.00</span></p>
              <p class="font-bold text-lg text-pink-600">ЁЯз╛ р╕вр╕нр╕Фр╕кр╕╕р╕Чр╕Шр╕┤: р╕┐<span id="total-price">0.00</span></p>
            </div>

            <button id="clear-cart" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded w-full">
              ЁЯЧСя╕П р╕ер╣Йр╕▓р╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>

            <!-- ЁЯМЯ р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ -->
            <div class="mt-6">
              <label for="payment-method" class="block mb-2 font-semibold">ЁЯТ│ р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ</label>
              <select id="payment-method" class="w-full p-2 border rounded">
                <option value="cod">р╣Ар╕Бр╣Зр╕Ър╣Ар╕Зр╕┤р╕Щр╕Ыр╕ер╕▓р╕вр╕Чр╕▓р╕З</option>
                <option value="transfer">р╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щр╕Ьр╣Ир╕▓р╕Щр╕Шр╕Щр╕▓р╕Др╕▓р╕г</option>
              </select>
            </div>

            <!-- ЁЯМЯ р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕кр╕ер╕┤р╕Ы -->
            <div id="slip-upload-container" class="mt-4 hidden">
              <label for="payment-slip" class="block mb-2 font-semibold">ЁЯУ╕ р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕кр╕ер╕┤р╕Ыр╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ</label>
              <input type="file" id="payment-slip" accept="--main1/S__565252.jpg" class="w-full" />
              <img id="slip-preview" src="" alt="р╕кр╕ер╕┤р╕Ыр╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ" class="hidden mt-2 max-w-xs rounded border" />
            </div>

            <!-- ЁЯУ▓ QR Code Payment -->
            <div id="qr-preview" class="mt-4 hidden text-center">
              <p class="font-semibold mb-2">ЁЯУ▓ р╕кр╣Бр╕Бр╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ</p>
              <canvas id="qr-canvas" class="mx-auto"></canvas>
            </div>

            <!-- ЁЯОЯя╕П р╣Гр╕кр╣Ир╕гр╕лр╕▒р╕кр╕Др╕╣р╕Ыр╕нр╕З -->
            <div class="my-4">
              <input id="coupon-input" type="text" placeholder="р╣Гр╕кр╣Ир╕гр╕лр╕▒р╕кр╕Др╕╣р╕Ыр╕нр╕З" class="border p-2 rounded w-full" />
              <button id="apply-coupon" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded w-full">ЁЯОЯя╕П р╣Гр╕Кр╣Йр╕Др╕╣р╕Ыр╕нр╕З</button>
            </div>

            <!-- тЬЕ р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Др╕╣р╕Ыр╕нр╕З -->
            <div id="coupon-result" class="hidden text-green-600 font-semibold">
              тЬЕ р╣Гр╕Кр╣Йр╕Др╕╣р╕Ыр╕нр╕Зр╣Бр╕ер╣Йр╕з! р╕кр╣Ир╕зр╕Щр╕ер╕Ф <span id="discount-value"></span>%
            </div>

            <button id="checkout" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded w-full">
              тЬЕ р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- тЬЕ Modal р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╣Ир╕нр╕Щр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н -->
    <div id="confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
      <div class="bg-white p-6 rounded shadow-lg max-w-sm w-full">
        <h2 class="text-lg font-semibold mb-4">ЁЯУж р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н</h2>
        <p>р╕Др╕╕р╕Ур╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕лр╕гр╕╖р╕нр╣Др╕бр╣И?</p>
        <div class="mt-4 flex justify-end gap-2">
          <button id="cancel-submit" class="px-4 py-2 bg-gray-300 rounded">р╕вр╕Бр╣Ар╕ер╕┤р╕Б</button>
          <button id="confirm-submit" class="px-4 py-2 bg-green-500 text-white rounded">р╕вр╕╖р╕Щр╕вр╕▒р╕Щ</button>
        </div>
      </div>
    </div>

    <script type="module" src="cart.js"></script>
    <script type="module" src="firebase-auth-modal.js"></script>
    <script type="module" src="redirect-to-admin.js"></script>
    <script>

    </script>
  </body>
  </html>
